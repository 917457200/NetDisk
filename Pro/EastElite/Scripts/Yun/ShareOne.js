var HY = { FlieShare: {} }; HY.FlieShare.Flie = { MyFileLoad: function (b, d, c) { var a = DFBGFlie.Flie.FlieOperation; a.AjaxList(d, { FileId: b }, function (j, e) { var k = j.model; if (e == "success") { var l = ""; if (k.length != 0) { $("#SumNum").html("已全部加载，共" + k.length + "个"); for (var h = 0; h < k.length; h++) { var g = k[h]; l += '<div class="g-clearfix list-view-item open-enable">'; if (g.IsFolder == true) { l += '<input type="checkbox" onclick="YzCheAll()" class="checkbox1" name="cheName" value="' + g.FileId + '" />'; l += '<div class="fileicon  dir-small"></div>' } else { l += '<input type="checkbox" onclick="YzCheAll()" class="checkbox1" name="cheName" value="' + g.FileId + '" />'; switch (g.FileExtName) { case ".jpg": case ".png": case ".jpeg": case ".jpg": case ".gif": case ".bmp": l += '<div  class="fileicon fileicon-small-pic"></div>'; break; case ".docx": case ".doc": l += '<div  class="fileicon fileicon-small-doc"></div>'; break; case ".xls": case ".xlsx": l += '<div  class="fileicon fileicon-small-xls"></div>'; break; case ".txt": l += '<div  class="fileicon fileicon-small-txt"></div>'; break; case ".rar": l += '<div  class="fileicon fileicon-small-rar"></div>'; break; case ".zip": l += '<div  class="fileicon fileicon-small-zip"></div>'; break; case ".pdf": l += '<div  class="fileicon fileicon-small-pdf"></div>'; break; case ".flv": case ".mp4": case ".mkv": case ".rmvb": case ".avi": case ".swf": case ".wmv": case ".3gp": case ".mpeg": case ".mpg": case ".rm": l += '<div  class="fileicon fileicon-small-video"></div>'; break; case ".exe": l += '<div  class="fileicon fileicon-small-exe"></div>'; break; case ".psd": l += '<div  class="fileicon fileicon-small-psd"></div>'; break; case ".mp3": case ".wma": case ".wav": l += '<div  class="fileicon fileicon-small-mp3"></div>'; break; case ".ppt": case ".pptx": l += '<div  class="fileicon fileicon-small-ppt"></div>'; break; case ".xmind": l += '<div  class="fileicon fileicon-small-xmind"></div>'; break; default: l += '<div  class="fileicon fileicon-small"></div>'; break } } l += '<div style="width: 50%" class="file-name">'; l += '<div class="text">'; if (g.IsFolder == true) { l += "<a onclick=\"HY.FlieShare.Flie.FileClick('" + g.FileId + "','" + g.FileName + "','" + c + '\')"  class="filename" href="#" title="' + g.FileName + '">' + g.FileName + "</a></div>" } else { l += "<a onclick=\"DFBGFlie.Flie.FlieOperation.FileShowControl('" + g.FileExtName + "','" + g.FileId + '\')" class="filename" href="#" title="' + g.FileName + '">' + g.FileName + "</a></div>" } l += '<div class="operate">'; l += '<div style="position: absolute; top: 0px; padding-top: 0px; line-height: normal;">'; if (g.IsFolder != true) { l += '<a href="/File/DownFile?FileId=' + g.FileId + '" class="g-button" style=" border:0;"><span class="g-button-right"><em title="下载" class="icon icon-download-blue"></em></span></a>' } else { } l += "    </div>"; l += "</div>"; l += "</div>"; l += '<div style="width: 16%" class="file-size">' + DFBGFlie.Flie.FlieOperation.GetFileSize(g.FileSizeKb) + "</div>"; var f = new Date(parseInt(g.FileCreateTime.replace("/Date(", "").replace(")/", ""), 10)); l += '<div style="width: 10%" class="ctime">已分享</div>'; l += '<div style="width: 10%" class="ctime">' + g.CreateName + "</div>"; l += '<div style="width: 13%" class="ctime">' + f.Format("yyyy-MM-dd hh:mm") + "</div>"; l += "</div>"; l += "</div>" } } else { l += '<div class="aGMvFtb">'; l += '<div class="hqvyGW05 wegnv3JM">'; l += '<p class="ggEQwFb">'; l += " 还没分享文件哦"; l += "</p>"; l += "</div>"; l += "</div>"; htmlInfo = l } $("#FileShowList").html(l); $(".module-list-view .list-view-item").hover(function () { $(this).children(".file-name").children(".operate").toggle() }); if ($(".list-view-item").length > 3) { $(".list-view-item:last .operate .menu").css({ "left": "-40px", "top": "-50px" }) } } }) }, InFileOnlode: function (a, b) { DFBGFlie.Flie.FlieOperation.AjaxHtml("/File/Navigation", { parentFileId: a, Url: b }, function (c) { if (c != "") { $("#TitleIds").append(c) } }, true) }, FileClick: function (b, a, c) { window.location.href = c + b } }; function AllCheck() { var b = document.getElementById("checkAll"); var c = document.getElementsByName("cheName"); if (b.checked == true) { for (var a = 0; a < c.length; a++) { c[a].checked = "checked" } } else { for (var a = 0; a < c.length; a++) { c[a].checked = false } } } function YzCheAll() { var c = $("input[type=checkbox][name=cheName]"); var a = 0; for (var b = 0; b < c.length; b++) { if (c[b].checked) { a++ } } if (c.length != 0) { if ((a == c.length)) { $("#checkAll").attr("checked", "true") } else { $("#checkAll").removeAttr("checked") } } else { $("#checkAll").removeAttr("checked") } };