(function (a) { a.fn.Select = function (c) { var b = {}; b = a.extend(b, c); var d = a(this); d.on("mousedown", function (k) { d.find("a").removeClass("item-active"); var g = k.pageY; var i = k.pageX; var f, h; var j = a('<div id="select-box"></div>'); a("body").append(j); j.css({ "position": "absolute", "top": g + "px", "left": i + "px", "background": "#8bbff9", "transition": "all 0s", "width": 0, "height": 0, "z-index": 10, "opacity": "0.5", "filter": "alpha(opacity = 50)", "border": " 1px solid #1362b4" }); a(document).on("mousemove", function (n) { n.preventDefault(); f = n.pageY; h = n.pageX; if (n.pageY - g > 0 && n.pageX - i > 0) { var l = n.pageY - g; var m = n.pageX - i; j.css({ "width": m + "px", "height": l + "px" }) } else { if (n.pageY - g < 0 && n.pageX - i < 0) { var l = -(n.pageY - g); var m = -(n.pageX - i); j.css({ "width": m + "px", "height": l + "px", "top": n.pageY + "px", "left": n.pageX + "px" }) } else { if (n.pageY - g > 0 && n.pageX - i < 0) { var l = (n.pageY - g); var m = -(n.pageX - i); j.css({ "width": m + "px", "height": l + "px", "top": g + "px", "left": n.pageX + "px" }) } else { if (n.pageY - g < 0 && n.pageX - i > 0) { var l = -(n.pageY - g); var m = (n.pageX - i); j.css({ "width": m + "px", "height": l + "px", "top": n.pageY + "px", "left": i + "px" }) } } } } d.children(".empty-time").find("a").each(function () { if ((i < a(this).offset().left + a(this).width() && a(this).offset().left < h && a(this).offset().top < f && a(this).offset().top + a(this).height() > g && (n.pageY - g > 0 && n.pageX - i > 0)) || (h < a(this).offset().left + a(this).width() && a(this).offset().left < i && a(this).offset().top < g && a(this).offset().top + a(this).height() > f && (n.pageY - g < 0 && n.pageX - i < 0)) || (h < a(this).offset().left + a(this).width() && a(this).offset().left < i && a(this).offset().top < f && a(this).offset().top + a(this).height() > g && (n.pageY - g > 0 && n.pageX - i < 0)) || (i < a(this).offset().left + a(this).width() && a(this).offset().left < h && a(this).offset().top < g && a(this).offset().top + a(this).height() > f && (n.pageY - g < 0 && n.pageX - i > 0))) { if (a(this).parent().css("display") != "none") { a(this).addClass("item-active") } return } else { a(this).removeClass("item-active") } }) }); a(document).on("mouseup", function () { a("#select-box").remove(); a(document).unbind("mousemove"); DFBGFlie.Flie.FlieOperation.isSelect() }) }) } })(jQuery); function showTime(e, b) { var d = $(".timeline-item"); var a = ""; var c = e + "" + (parseInt(b) > 9 ? b : "0" + b) + "01"; if (e == "" && b == "") { d.html('<div class="aGMvFtb"><div class="hqvyGW05 wegnv3JM"><p class="ggEQwFb"> 您还没上传过图片哦</p></div></div>'); return } DFBGFlie.Flie.FlieOperation.AjaxList("../Details/GetImgTitleInfo", { time: c }, function (g) { if (g.ImgTitleInfoList != null) { for (var f = 0; f < g.ImgTitleInfoList.length; f++) { var h = g.ImgTitleInfoList[f].CreateUnitCode.replace("年", "").replace("月", "").replace("日", ""); a += '<div class="timeline-title global-clearfix">'; a += '<span class="timeline-day">' + g.ImgTitleInfoList[f].CreateUnitCode + "</span>"; a += '<span class="global-icon-down"></span>'; a += '<span class="timeline-days-num" id="days-num' + h + '"></span>张'; a += '<div class="timeline-checkall">'; a += ' <a class="global-icon global-icon-checkbox"></a>'; a += '<span class="icon checksmall-icon">'; a += "</span>"; a += " <label>全选</label>"; a += " </div>"; a += "</div>"; a += '<div id="data' + h + '" class="timeline-content global-clearfix list-content">'; a += "</div>"; a += '<div class="daysMore daysMore' + h + '" ></div>'; d.html(a); GetImgListInfo(h, 1) } $(".operate-select-box").click(function (i) { $(this).parent().css("display", "none"); $(".item-active").removeClass("item-active") }); $(".timeline-checkall").on("mousedown", function (i) { i.preventDefault(); i.stopPropagation(); $(this).parent().next().find(".content-item").toggleClass("item-active"); $(this).parent().toggleClass("on"); DFBGFlie.Flie.FlieOperation.isSelect() }); $(".timeline-title").on("mousedown", function (i) { i.preventDefault(); if ($(this).children(".global-icon-down").hasClass("global-icon-up")) { $(this).children(".global-icon-down").removeClass("global-icon-up"); $(this).next().css("display", "block"); $(this).next().next().css("display", "block") } else { $(this).children(".global-icon-down").addClass("global-icon-up"); $(this).next().css("display", "none"); $(this).next().next().css("display", "none") } }) } }) } function GetImgListInfo(b, a) {
    $.ajax({
        type: "POST", url: "../Details/GetImgListInfo", data: { time: b, idenx: a }, dataType: "json", async: true, beforeSend: function (c) { }, success: function (e) {
            if (e.ImgInfoList != null) {
                var c = ""; for (var f = 0; f < e.ImgInfoList.length; f++) { c += '<a id="add' + e.ImgInfoList[f].FileId + "\" onmousedown=\"DFBGFlie.Flie.FlieOperation.FileShowControl('.jpg','" + e.ImgInfoList[f].FileId + '\')"  class="timeline-content-item content-item " href="#" >'; c += ' <img class="img" data-url="/File/ImgSuoLue?FileId=' + e.ImgInfoList[f].FileId + '" style="visibility: visible; left: -65.5px;top: -1.5px;height:143px;width:256px;">'; c += ' <div class="thumb-large">'; c += ' <em class="checkbox-item">'; c += ' <span class="icon circle-icon">&#xe93b; </span>'; c += ' <span class="icon checkgridsmall">&#xe935; </span>'; c += " </em>"; c += "</div>"; c += "</a>" } var d = parseFloat($("#days-num" + b).html() == "" ? 0 : $("#days-num" + b).html()) + parseFloat(e.ImgInfoList.length); if (d < e.Count) {
                    $(".daysMore" + b).html(""); $(".daysMore" + b).append('<span class="" onclick="GetImgListInfo(\'' + b + "'," + (a + 1) + ')">点击查看更多</span>')
                } else { $(".daysMore" + b).html("") } $("#days-num" + b).html(d); $("#data" + b).append(c); $(".checkbox-item").off(); $(".checkbox-item").mousedown(function (g) { g.preventDefault(); g.stopPropagation(); $(this).parent().parent().toggleClass("item-active"); DFBGFlie.Flie.FlieOperation.isSelect() }); $(".empty-time").Select(); $("img").load(function () { $(this).hide(); $(this).stop().show() }); $(".content-item").scrollLoading()
            }
        }, complete: function (c, d) { }, error: function (d, c) { }
    })
};